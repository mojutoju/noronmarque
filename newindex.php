<?php include('db/connect.php'); ?>
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  <title>Noron Marque - A team of individuals with diverse specialties and backgrounds, working with clients to leverage on resources, develop capacities and redefine change.</title>
  <link rel="icon" href="img/99.png" type="image/png" />
    <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
  />
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css">
     <link href='https://fonts.googleapis.com/css?family=Poppins' rel='stylesheet'>
        
  <!-- Bootstrap core CSS -->
  <!-- Bootstrap core CSS -->
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <!-- Material Design Bootstrap -->
  <link href="css/mdb.min.css" rel="stylesheet">
  <!-- Your custom styles (optional) -->
  <link href="css/style.min.css" rel="stylesheet">
  <style type="text/css">
  
  
  body{
      font-family: 'Poppins';
      background-image: url('newimg/slice1.svg');
      background-size:cover;
      background-position:center;
      height:100%;
    
     
  }
  
  
        
        html,
      body,
      header,
      .carousel {
        height: 80vh;
      }

      @media (max-width: 740px) {
        html,
        body,
        header,
        .carousel {
          height: 100vh;
        }
      }

      @media (min-width: 800px) and (max-width: 850px) {
        html,
        body,
        header,
        .carousel {
          height: 100vh;
        }
      }

      @media (min-width: 800px) and (max-width: 850px) {
              .navbar:not(.top-nav-collapse) {
                  background: white;
              }
          }
.view,body,html{height:100%}@media (max-width:740px){.full-page-intro{height:1000px}}.carousel{height:80%}.carousel .carousel-inner,.carousel .carousel-inner .active,.carousel .carousel-inner .carousel-item{height:100%}@media (max-width:776px){.carousel{height:100%}}.navbar{background-color:rgba(0,0,0,.3)}.page-footer,.top-nav-collapse{background-color:#1C2331}@media only screen and (max-width:768px){.navbar{background-color:#1C2331}}


#myBtn {
  display: none;
  position: fixed;
  bottom: 20px;
  right: 30px;
  z-index: 99;
  font-size: 18px;
  border: none;
  outline: none;
  background-color: skyblue;
  color: white;
  cursor: pointer;
  padding: 15px;
  border-radius: 4px;
}

#myBtn:hover {
  background-color: white;
  color:black;
}
  
     .card-product .img-wrap {
    border-radius: 3px 3px 0 0;
    overflow: hidden;
    position: relative;
    height: 220px;
    text-align: center;
}


       .card-product .info-wrap {
    overflow: hidden;
    padding: 15px;
    border-top: 1px solid #eee;
}


.masthead {
  height: 70vh;
  min-height: 495px;
background-image:url('img/bg2.svg');
background-size:cover;
  background-position: center;
  background-repeat: no-repeat;
}



.mastheads {
  height: 20vh;
  min-height: 260px;
background-image:url('img/careerz.jpg');
background-size:cover;
  background-position: 30% 20% ;
  background-repeat: no-repeat;
}



#program:hover {
     background: #0F52BA;
   color: white; 
}

/* Bottom left text */
.bottom-left {
  position: absolute;
  bottom: 8px;
  left: 16px;
}

    
    
    .card {
	margin: 0 auto;
	border: none;
}
.card .carousel-item {
	min-height: 190px;
}
.card .carousel-caption {
	padding: 0;
	right: 15px;
	left: 15px;
	top: 15px;
	color: #3d3d3d;
	border: 1px solid #ccc;
	min-height:175px;
	padding: 15px;
}
.card .carousel-caption .col-sm-3 {
	display: flex;
	align-items: center;
}
.card .carousel-caption .col-sm-9 {
	text-align: left;
}
.card .carousel-control-prev, .card .carousel-control-next {
	color: #3d3d3d !important;
	opacity: 1 !important;
}
.carousel-control-prev-icon, .carousel-control-next-icon {
	background-image: none;
	color: #fff;
	font-size: 14px;
	background-color: #cd3a54;
	height: 32px;
	line-height: 32px;
	width: 32px;
}
.carousel-control-prev-icon:hover, .carousel-control-next-icon:hover {
	opacity: 0.85;
}
.carousel-control-prev {
	left: 40%;
	top: 110%;
}
.carousel-control-next {
	right: 40%;
	top: 110%;
}
.midline {
	width: 60px;
	border-top: 1px solid #d43025;
}
.carousel-caption h2 {
	font-size: 14px;
}
.carousel-caption h2 span {
	color: #cd3a54;
}
 @media (min-width: 320px) and (max-width: 575px) {
.carousel-caption {
	position: relative;
}
.card .carousel-caption {
	left: 0;
	top: 0;
	margin-bottom: 15px;
}
.card .carousel-caption img {
	margin: 0 auto;
}
.carousel-control-prev {
	left: 35%;
	top: 105%;
}
.carousel-control-next {
	right: 35%;
	top: 105%;
}
.card .carousel-caption h3 {
	margin-top: 0;
	font-size: 16px;
	font-weight: 700;
}
}
@media (min-width: 576px) and (max-width: 767px) {
.carousel-caption {
	position: relative;
}
.card .carousel-caption {
	left: 0;
	top: 0;
	margin-bottom: 15px;
}
.card .carousel-caption img {
	margin: 0 auto;
}
.card .carousel-caption h3, .card .carousel-caption small {
	text-align: center;
}
.carousel-control-prev {
	left: 35%;
	top: 105%;
}
.carousel-control-next {
	right: 35%;
	top: 105%;
}
}
@media (min-width: 767px) and (max-width: 991px) {
.card .carousel-caption h3 {
	margin-top: 0;
	font-size: 16px;
	font-weight: 700;
}
}


.options {
  border: 8px solid white;
    margin: 6px;
    background-color: #fafafa;
    box-shadow: 0 2px 5px 0 rgba(0,0,0,0.16), 0 2px 10px 0 rgba(0,0,0,0.12);
    position: relative;
    padding:13px;
       min-width: 300px;
  
}





.opt {
  border-radius: 13px;
    margin: 6px;
background: rgb(255,102,0);
background: linear-gradient(90deg, rgba(255,102,0,1) 22%, rgba(249,228,61,1) 100%);
    box-shadow: 0 2px 5px 0 rgba(0,0,0,0.16), 0 2px 10px 0 rgba(0,0,0,0.12);
    position: relative;
    padding:13px;
       min-width: 300px;
       width:100%;
  
}





.items {
    display: flex;
    overflow-x: auto;
}
      
      .items::-webkit-scrollbar{
          display:none;
      }
      
      
      
      
#slider {
  position: relative;
  width: 50%;
  height: 30vw;
  margin: 80px auto;
  font-family: 'Helvetica Neue', sans-serif;
  perspective: 1400px;
  transform-style: preserve-3d;
}

input[type=radio] {
  position: relative;
  top: 108%;
  left: 50%;
  width: 18px;
  height: 18px;
  margin: 0 15px 0 0;
  opacity: 0.4;
  transform: translateX(-83px);
  cursor: pointer;
}


input[type=radio]:nth-child(5) {
  margin-right: 0px;
}

input[type=radio]:checked {
  opacity: 1;
}




#slider label {
  position: absolute;
  width: 100%;
  height: 100%;
  left: 0;
  top: 0;
  color: white;
  font-size: 70px;
  font-weight: bold;
  border-radius: 5px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: transform 400ms ease;
}







/* Watch on YouTube */
.youtube {  
  position: fixed;
  top: 90%;
  width: 100%;
  text-align: center;
  padding: 0 10px;
  font-family: Tahoma;
}

.youtube a {
  color: red;
  font-weight: bold;
}
      
      
      
  </style>
  <script src="js/sweetalert.min.js"></script>
</head>

<body>


<?php include('nav.php'); ?>



<br><br>
<br><br>

<!-- Full Height Modal Right -->
<div class="modal fade right" id="fullHeightModalRight" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
  aria-hidden="true">

  <!-- Add class .modal-full-height and then add class .modal-right (or other classes from list above) to set a position to the modal -->
  <div class="modal-dialog modal-full-height modal-right" role="document">


    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title w-100" id="myModalLabel"> SERVICES </h4>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
    
    
    
    <?php

$user = mysqli_query($dbc,"SELECT * FROM `services` WHERE 1 ");
if(mysqli_num_rows($user) > 0){
    $uk = 1;
 while($rows = mysqli_fetch_assoc($user)){
$servicename = $rows['servicename'];



    ?>
    
    
    
    
    
     <button style="width:100%;" type="button" class="btn btn" data-toggle="collapse" data-target="#demo" style="background-color: #fafafa; color:black;"> <?php echo $servicename; ?> </button>
  <div id="demo" class="collapse">


           
<?php

$users = mysqli_query($dbc,"SELECT * FROM `subservices` WHERE 1 ");
if(mysqli_num_rows($users) > 0){
    $u = 1;
 while($rows = mysqli_fetch_assoc($users)){
$servicenames = $rows['servicename'];
$subservicename = $rows['subservicename'];
$subserviceid = $rows['subservice_id'];

    ?>
    
    
    <?php 
    if($servicename == $servicenames){
    ?>
    
    
        

            
            <p style="font-size:14px;">  <a style="color:black;" href="viewservices.php?subserviceid=<?php echo $subserviceid; ?>"> <?php echo $subservicename; ?> </a> </p>
       
        <hr>
   
    
    <?php }else{}
    
    
    
    $u++; }}
    ?>




  </div>
    
    
    <?php
    
    $uk++; 
 }} ?>
    
    
      </div>
      <div class="modal-footer justify-content-center">
        <button type="button" class="btn btn-danger" data-dismiss="modal" style="width:100%;">Close</button>
       
      </div>
    </div>
  </div>
</div>
<!-- Full Height Modal Right -->
 
                            

<div class="container">

<div class="row">
    
    
    <div class="col-md-6 mb-3">
        
         
        <h5 class="font-weight-800 animate__animated animate__fadeInLeft " style="font-weight:800; font-size:15px; color:black; letter-spacing: 3px;"> WHO WE ARE </h5>
        <hr style="background:white; color:white;">
        <h4 class="animate__animated animate__fadeInRight" style=" color:black; font-weight:800; line-height:32px;">  <strong style="color:blue;"> A team of individuals  </strong> with diverse specialties and backgrounds,  working with clients to leverage on resources, develop capacities and redefine change. </h4>
  
 
  <div>
       <a href="aboutus.php" class="btn btn rounded-lg" style="background:blue; color: white;"> What We Do </a>
            <a href="users/signup.php" class="btn btn rounded-lg" style="background:white; color:black;" > Create an Account  </a>
  </div>
        
    </div>
    
    
    
     <div class="col-md-6 mb-3 animate__animated animate__fadeInRight">
         
         <img src="newimg/21.svg" class="img-fluid">
         
         <br>
         <br>
         <h5  style=" color:black; font-weight:800; "> Sometimes ideas seem so complex and so grandiose that you don't know where to begin.
         
         </h5>
         
         <p style="font-size:20px;">
             That is where we come in. Tell us all about it and we will see if we can help.
         </p>
         
          <a id="program" data-toggle="modal" data-target="#exampleModal"   href="#" class="btn btn rounded-lg" style=" background: rgb(249,228,61);
background: linear-gradient(90deg, rgba(249,228,61,1) 0%, rgba(255,102,0,1) 100%);   color:BLACK; font-weight:800; font-size:16px;"> START YOUR PROJECT </a>


         
         </div>
    
    
    
    
    
</div>



  
  
  <!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel" style="font-weight:800;"> Start Your Project</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
   
           <form name="project" method="POST" action="index.php" >
               
              
              <div class="row">
                  
                 <div class="col-md-6 mb-3">
                     
                       <div class="form-group">
                 
                 <input type="text" class="form-control" name="fname" placeholder="First Name" required="">
             </div>  
               
               
                     
                     
                     
                 </div> 
                  
                  
                  
                    <div class="col-md-6 mb-3">
                     
                       <div class="form-group">
                 
                 <input type="text" class="form-control" name="lname" placeholder="Last Name" required>
             </div>  
               
               
                     
                     
                     
                 </div> 
                  
                  
                    <div class="col-md-6 mb-3">
                     
                       <div class="form-group">
                 
                 <input type="email" class="form-control" name="email" placeholder="E-mail Address" required>
             </div>  
               
               
                     
                     
                     
                 </div> 
                  
                  
                  
                    
                    <div class="col-md-6 mb-3">
                     
                       <div class="form-group">
                 
                 <input type="text" class="form-control" name="phoneno" placeholder="Phone No"  onkeydown="return ( event.ctrlKey || event.altKey || (47<event.keyCode && event.keyCode<58 && event.shiftKey==false) 
                    || (95<event.keyCode && event.keyCode<106)
                    || (event.keyCode==8) || (event.keyCode==9) 
                    || (event.keyCode>34 && event.keyCode<40) 
                    || (event.keyCode==46) )" required>
             </div>  
               
               
                     
                     
                     
                 </div> 
                 
                 
                 
                   <div class="col-md-6 mb-3">
                     
                     <label> Select Date </label>
                       <div class="form-group">
                 
                 <input type="date" class="form-control" name="consultdate" placeholder="Select Date"   required>
             </div>  
               
               
                     
                     
                     
                 </div> 
                 
                    <div class="col-md-6 mb-3">
                      <label> Select Time </label>
                       <div class="form-group">
                 
                 <input type="time" class="form-control" name="consulttime" placeholder="Select Date"   required>
             </div>  
               
               
                     
                     
                     
                 </div> 
                  
                  
              </div> 
              
              
           
              <div class="form-group">
                  
                  <input type="text" name="subject" class="form-control" placeholder="Subject" required>
              </div> 
               
               
                
              <div class="form-group">
                       <label> Type of Project </label>
<textarea cols="60"  class="form-control" name="projecttype" required></textarea>
              </div> 
               
               
                 <div class="form-group">
                       <label> Description </label>
<textarea cols="60" class="form-control" name="description" required></textarea>
              </div> 
               
               
                  <div class="form-group">
                       <label> Expected Results </label>
<textarea cols="60" class="form-control" name="expectedresults" required></textarea>
              </div> 
              
              
              <div class="form-group">
                  <input type="number" class="form-control" name="expecteddelivery" placeholder="Expected Delivery (in weeks)" required>
              </div>
              
              <div class="form-group">
                       <label> Additional Information (optional) </label>
<textarea cols="60" class="form-control" name="additionalinfo" ></textarea>
              </div> 
              
              
         
              
              <div class="form-group">
                    <input type="submit" class="btn btn-primary" name="project" value="Submit" >
              </div> 
               
           </form>
           
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
 
      </div>
    </div>
  </div>
</div>
		


</div>


<br><br>


<div class="container">
    
    
    <div class="row">
        
        
       <div class="col-md-6 mb-3">
           
           
         <img src="newimg/22.svg" class="img-fluid">
           <BR><BR>
               
           <h4 style="text-align:center;"> S W I P E  <i class="fa fa-caret-square-o-right"></i></h4>
           
           
           
           
           
           
           
       </div> 
        
        
        <div class="col-md-6 mb-3">
            
            
             
              
		<div class="items animate__animated animate__fadeInDown">
                       
            
		
                           
              
<a href="#">
 <div id="one" class="options">
     
    
     
       <center>
            
            
            <img src="newimg/jobs.jpg" class=" img-thumbnail img-fluid">
            
            <br><br>
            <h3 style="font-weight:800; color:black;"> JOB SEEKERS </h3>
            
            
        </center>
     
     
     
 </div> </a>
 
 
              
<a href="#" data-toggle="modal" data-target="#fullHeightModalRight">
 <div id="one" class="options">
     
     
     
       <center>
            
            
            <img src="newimg/services.jpg" class=" img-thumbnail img-fluid">
            
            <br><br>
            <h3 style="font-weight:800; color:black;"> SERVICES </h3>
            
            
        </center>
     
     
     
 </div> </a>
 
 
 
 </div>
 
 
 
 
 
            
            </div>
            
            
        </div>
        
        
        
        
        
    </div>
    
    
    
    
    
    
    
    
</div>
       
       
       <br><br><br>
       
       
       <div class="container">
           
           
           <h2 style="font-weight:800; text-align:center;"> TAKE A <strong style="color:blue;"> PEEK </strong> </h2>
           
      <center>     <hr style="width: 20%; color: black; background: black;">
       </center>    
           
         <div class="row">
             
             
             <div class="col-md-4 mb-3">
                 <img src="newimg/ebooks.svg" class="img-fluid">
                 <br>
                 <h4 style="text-align:center;"> <strong style="color:orange;"> E-Books</strong> Templates</h4>
             </div>
             
             
              <div class="col-md-4 mb-3">
                 <img src="newimg/resume.svg" class="img-fluid">
                 <br>
                 <h4 style="text-align:center;"> <strong style="color:blue;"> Resume </strong> Templates</h4>
             </div>
             
             
              <div class="col-md-4 mb-3">
                 <img src="newimg/worksheets.svg" class="img-fluid">
                 <br>
                 <h4 style="text-align:center;"> WorkSheets</h4>
             </div>
             
             
         </div>
           
       </div>
       
       
       
       <br><br><br>
       
       <div class="section" style="background: rgb(255,102,0);
background: linear-gradient(90deg, rgba(255,102,0,1) 22%, rgba(249,228,61,1) 100%); padding: 23px;">
           
           
           <br><br>
           
           <div class="container">
           <h1 style="color:white; font-weight:800; text-align:center;"> Let's do <strong style="color:blue;"> business  </strong>together ! </h1>
           
           <h4 style="text-align:center; color:black;"> Watch video below and let our work speak for itself</h4>
           <br>
           
           <div class="embed-responsive embed-responsive-16by9" style=" -webkit-box-shadow: 0 10px 6px -6px #777;
     -moz-box-shadow: 0 10px 6px -6px #777;
          box-shadow: 0 10px 6px -6px #777;">
           <iframe class="embed-responsive-item" width="560" height="315" src="https://www.youtube.com/embed/eHWDm0hgPPI" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" style="border-radius:20px; " allowfullscreen></iframe>
           </div>
       </div></div>
       
       
       
       
       
       
       
       <br><br><br>
       
       
       <div class="container">
           
           <div class="row">
               
               
               
               
                    <div class="col-md-6 mb-2 animate__animated animate__fadeInRight ">
                 
                 
                
          
    <h5 class="font-weight-800 " style="font-weight:800; font-size:25px; color:blue; letter-spacing: 3px;"> RESOURCES </h5>
     
    <hr class="black accent-4 mb-4 mt-0 d-inline-block mx-auto" style="width: 60px;">
    
    
 
        <h2 class="animate__animated animate__fadeInRight" style=" color:black; font-weight:800; line-height:38px;">  At Noron Marque, we setup resourceful tools to help develop our clients business strategic skills.  </h2>
     
    
       <br>
              
              <p class="animate__animated animate__slideInDown" style=" text-align:left; font-size:23px;"  >
                Our industry specialists, elite examination and business points of view are included in various output medias across the world.
              </p>
   
      
   
    
    
                 
             </div>
             
             
             
             <div class="col-md-6 mb-2">
                 
                 
               
               <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
  <ol class="carousel-indicators">
    <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
    <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
    <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
    <li data-target="#carouselExampleIndicators" data-slide-to="3"></li>
    
  </ol>
  <div class="carousel-inner">
    <div class="carousel-item active">
      <img class="img-fluid" src="img/ebooks.png" alt="First slide">
    </div>
    <div class="carousel-item">
      <img class="img-fluid" src="img/podcast.png" alt="Second slide">
    </div>
    <div class="carousel-item">
      <img class="img-fluid" src="img/videos.png" alt="Third slide">
    </div>
    
     <div class="carousel-item">
      <img class="img-fluid" src="img/toolkit.png" alt="Fourth slide">
    </div>
  </div>
  <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
</div>  
                 

                 
             </div>
             
             
               
               
           </div>
           
           
           
       </div>
       
       
       
       
       <div class="container">
           
           
           
               <h2 class="font-weight-800 " style="font-weight:800; font-size:25px; color:black; text-align:center; "> LATEST PROGRAMS </h2>
           
                 <div class="items">
                     
<?php
$limit = 4;
$users = mysqli_query($dbc,"SELECT * FROM `programmes` WHERE 1 ORDER BY classname ASC LIMIT 0, $limit  ");
if(mysqli_num_rows($users) > 0){
    $u = 1;
 while($rows = mysqli_fetch_assoc($users)){

  $file = $rows['file'];
  $setdate = $rows['setdate'];
  $amount = $rows['amount'];
  $description = $rows['description'];
  $classname = $rows['classname'];
  $id = $rows['program_id'];
  $briefintro = $rows['briefintro'];
    ?>
    
    
    <div class="opt">
        
        <div class="row">
            
            <div class="col-md-6">
                <img src="noronmarque/programmes/<?php echo $file ?>" class="img-fluid">
            </div>
            
        </div>
        
    </div>
    
                
           
                    <?php
                    $u++; }}
                    ?>
                    
                    
           
           
           </div>
           
           
           
       </div>
       
       
       
<button onclick="topFunction()" id="myBtn" title="Go to top">Top</button>

 
    
    

  <script type="text/javascript">
  
  
  
  
  
  
  
       
    $(document).ready(function() {

$("#types").change(function() {
    var val = $(this).val();
    if (val == "0-5years") {
        $("#sizes").html(
        "<option value='10000'>10000</option>   ");
        
    } else if (val == "Above 6years") {
        $("#sizes").html("<option value='16000'> 16000 </option>");


}


    
});


});

  
  
  
  
  
  $(document).ready(function() {
  $('#global-modal').modal('show');
});
  
  
  
  
  
  
  
  
$(document).ready(function() {
    
	$(".rating-wrap").shorten();
	
	$(".rating-wrap").shorten({showChars: 150});

 });
 
 
 (function($) {
    $.fn.shorten = function(settings) {
        "use strict";

        var config = {
            showChars: 400,
            minHideChars: 10,
            ellipsesText: "...",
            moreText: "",
            lessText: "less",
            onLess: function() {},
            onMore: function() {},
            errMsg: null,
            force: false
        };

        if (settings) {
            $.extend(config, settings);
        }

        if ($(this).data('jquery.shorten') && !config.force) {
            return false;
        }
        $(this).data('jquery.shorten', true);

        $(document).off("click", '.morelink');

        $(document).on({
            click: function() {

                var $this = $(this);
                if ($this.hasClass('less')) {
                    $this.removeClass('less');
                    $this.html(config.moreText);
                    $this.parent().prev().animate({'height':'0'+'%'}, function () { $this.parent().prev().prev().show(); }).hide('fast', function() {
                        config.onLess();
                      });

                } else {
                    $this.addClass('less');
                    $this.html(config.lessText);
                    $this.parent().prev().animate({'height':'100'+'%'}, function () { $this.parent().prev().prev().hide(); }).show('fast', function() {
                        config.onMore();
                      });
                }
                return false;
            }
        }, '.morelink');

        return this.each(function() {
            var $this = $(this);

            var content = $this.html();
            var contentlen = $this.text().length;
            if (contentlen > config.showChars + config.minHideChars) {
                var c = content.substr(0, config.showChars);
                if (c.indexOf('<') >= 0) // If there's HTML don't want to cut it
                {
                    var inTag = false; // I'm in a tag?
                    var bag = ''; // Put the characters to be shown here
                    var countChars = 0; // Current bag size
                    var openTags = []; // Stack for opened tags, so I can close them later
                    var tagName = null;

                    for (var i = 0, r = 0; r <= config.showChars; i++) {
                        if (content[i] == '<' && !inTag) {
                            inTag = true;

                            // This could be "tag" or "/tag"
                            tagName = content.substring(i + 1, content.indexOf('>', i));

                            // If its a closing tag
                            if (tagName[0] == '/') {


                                if (tagName != '/' + openTags[0]) {
                                    config.errMsg = 'ERROR en HTML: the top of the stack should be the tag that closes';
                                } else {
                                    openTags.shift(); // Pops the last tag from the open tag stack (the tag is closed in the retult HTML!)
                                }

                            } else {
                                // There are some nasty tags that don't have a close tag like <br/>
                                if (tagName.toLowerCase() != 'br') {
                                    openTags.unshift(tagName); // Add to start the name of the tag that opens
                                }
                            }
                        }
                        if (inTag && content[i] == '>') {
                            inTag = false;
                        }

                        if (inTag) { bag += content.charAt(i); } // Add tag name chars to the result
                        else {
                            r++;
                            if (countChars <= config.showChars) {
                                bag += content.charAt(i); // Fix to ie 7 not allowing you to reference string characters using the []
                                countChars++;
                            } else // Now I have the characters needed
                            {
                                if (openTags.length > 0) // I have unclosed tags
                                {
                                    //console.log('They were open tags');
                                    //console.log(openTags);
                                    for (j = 0; j < openTags.length; j++) {
                                        //console.log('Cierro tag ' + openTags[j]);
                                        bag += '</' + openTags[j] + '>'; // Close all tags that were opened

                                        // You could shift the tag from the stack to check if you end with an empty stack, that means you have closed all open tags
                                    }
                                    break;
                                }
                            }
                        }
                    }
                    c = $('<div/>').html(bag + '<span class="ellip">' + config.ellipsesText + '</span>').html();
                }else{
                    c+=config.ellipsesText;
                }

                var html = '<div class="shortcontent">' + c +
                    '</div><div class="allcontent">' + content +
                    '</div><span><a href="javascript://nop/" class="morelink">' + config.moreText + '</a></span>';

                $this.html(html);
                $this.find(".allcontent").hide(); // Hide all text
                $('.shortcontent p:last', $this).css('margin-bottom', 0); //Remove bottom margin on last paragraph as it's likely shortened
            }
        });

    };

})(jQuery);
</script>


  <script type="text/javascript">

 
    
         if ( window.history.replaceState ) {
  window.history.replaceState( null, null, window.location.href );
}
  
  </script>
</body>

</html>

